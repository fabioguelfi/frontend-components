<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<link rel="import" href="../../bower_components/paper-checkbox/paper-checkbox.html">

<link rel="import" href="../qa-behavior/v1/qa-date-behavior.html">
<link rel="import" href="../qa-behavior/v1/qa-user-behavior.html">

<dom-module id="qa-shortcuts">
	<template>
		<paper-dialog id="dlgOnboardingShortcuts" modal>
			<h1>YES, nós temos atalhos!</h1>
			<p>
				Para facilitar sua vida, nós colocamos atalhos dentro do CRM.<br />
				Veja alguns deles:
			</p>
			<ul>
				<li><span class="shortcut">[[baseShortCut]]</span>Abrir Busca/Lista de atalhos</li>
				<template is="dom-repeat" items="[[exampleCommands]]">
					<template is="dom-if" if="[[!item.depends]]">
						<li><span class="shortcut">[[item.shortcut]]</span>[[item.description]]</li>
					</template>
				</template>
			</ul>
			<p>
				Lembre-se: para pesquisar os atalhos disponíveis você pode usar o "[[baseShortCut]]"
			</p>
			<paper-button raised active on-tap="closeOnboarding">Ok, entendi!</paper-button>
			<paper-checkbox checked="{{dontShowOnboarding}}">Já entendi e não quero mais ver essa tela :)</paper-checkbox>
		</paper-dialog>
		<style is="custom-style">
			#dlgOnboardingShortcuts ul,
			#dlgOnboardingShortcuts li {
				list-style: none;
			}
			#dlgOnboardingShortcuts li {
				display:block;
				padding: 5px 10px;
			}
			#dlgOnboardingShortcuts paper-button {
				background-color: #00A2F6;
				color: #ffffff;
				font-weight: bold;
				padding: 10px 22px;
				margin-left: 24px;
			}
			li .shortcut {
				border-radius: 5px;
				background-color: #888888;
				color: #ffffff;
				min-width: 80px;
				text-align: center;
				padding: 4px 8px;
				font-size: 9pt;
				position: absolute;
				right: 0;
				font-weight: bold;
				margin-right: 20px;
			}
		</style>
	</template>
	<script>
		Polymer({
			is: 'qa-shortcuts-onboarding',
			behaviors: [ QuintoAndar.DateBehavior, QuintoAndar.UserBehavior ],
			properties: {
				exampleCommands: Array,
				dontShowOnboarding: false
			},
			closeOnboarding: function() {
				if (this.dontShowOnboarding) {
					var crmShortcut = this.getCookieValue("hasSeenOnboarding", "no");
					if (crmShortcut != "yes") {
						this.setCookieOnBaseDomain("hasSeenOnboarding", "yes")
					}
				}
				this.$.dlgOnboardingShortcuts.close()
			},
			ready: function() {
				var userCreatedBeforeOneMonthAgo = new Date(this.user.userCreatedAt) < this.monthBefore();
				var hasSeenOnboarding = this.getCookieValue("hasSeenOnboarding", "no");
				if (userCreatedBeforeOneMonthAgo && hasSeenOnboarding != "yes") {
					this.$.dlgOnboardingShortcuts.open();
				}
			}
		});
	</script>
</dom-module>

